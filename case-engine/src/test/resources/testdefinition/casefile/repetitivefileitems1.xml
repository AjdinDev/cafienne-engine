<?xml version="1.0" encoding="utf-8"?>
<definitions>
	<case name="repetitiveFileItems" xmlns="http://www.omg.org/spec/CMMN/20121031/MODEL">

		<caseFileModel>      
			<caseFileItem name="TopCase" definitionRef="unspecified" multiplicity="ZeroOrOne">
				<children>
					<caseFileItem name="items" definitionRef="unspecified" multiplicity="ZeroOrMore">
						<children>
							<caseFileItem name="item" definitionRef="unspecified" multiplicity="ExactlyOne"/>
							<caseFileItem name="role" definitionRef="unspecified" multiplicity="ExactlyOne"/>
						</children>
					</caseFileItem>
				</children>
			</caseFileItem>
		</caseFileModel>
		
		<casePlanModel name="repetitiveFileItems">

			<planItem name="Review" definitionRef="ReviewTask">
				<itemControl>
					<repetitionRule name="repRule" contextRef="TopCase">
						<condition language="spel">
							<body>
								<!-- Can add as many items as we like ?-->
								<![CDATA[TopCase.items.size() < 2]]>
							</body>
						</condition>
					</repetitionRule>
				</itemControl>
				<entryCriterion name="ItemAdded" sentryRef="ItemAdded_Sentry" />
			</planItem>

			<humanTask name="ReviewTask" performerRef="$role">
				<inputs name="role" bindingRef="role" />
				<inputs name="item" bindingRef="item" />
			</humanTask>

			<sentry id="ItemAdded_Sentry">
				<caseFileItemOnPart sourceRef="items">
					<standardEvent>Create</standardEvent>
				</caseFileItemOnPart>
			</sentry>

		</casePlanModel>


		<caseRole name="$role" />
	</case>
	
	<caseFileItemDefinition name="unspecified">
	</caseFileItemDefinition>
</definitions>